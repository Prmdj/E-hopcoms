{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Preetham\\\\Desktop\\\\REACT\\\\alpha-clothing\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"C:\\\\Users\\\\Preetham\\\\Desktop\\\\REACT\\\\alpha-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:\\\\Users\\\\Preetham\\\\Desktop\\\\REACT\\\\alpha-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Preetham\\\\Desktop\\\\REACT\\\\alpha-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Preetham\\\\Desktop\\\\REACT\\\\alpha-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _createSuper from\"C:\\\\Users\\\\Preetham\\\\Desktop\\\\REACT\\\\alpha-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\Preetham\\\\Desktop\\\\REACT\\\\alpha-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";import{Switch,Route,Redirect}from\"react-router-dom\";import{connect}from\"react-redux\";import{createStructuredSelector}from'reselect';import\"./App.css\";import HomePage from\"./pages/homepage/homepage.component.jsx\";import ShopPage from\"./pages/shop/shop.components.jsx\";import CheckoutPage from'./pages/checkout/checkout.component';import SignInAndSignUp from\"./pages/sign-in-and-sign-up/sign-in-and-sign-up.component.jsx\";import Header from\"./components/header/header.component.jsx\";import{auth,createUserProfileDocument}from\"./firebase/firebase.utils\";import{setCurrentUser as _setCurrentUser}from\"./redux/user/user.actions\";import{selectCurrentUser}from'./redux/user/user.selector';// const HatsPage = () => (\n//   <div>\n//     <h1>Hats Page</h1>\n//   </div>\n// )\n// const HatsPage = (props) => {\n//   console.log(props);\n//   return (\n//     <div>\n//       <h1>Hats Page</h1>\n//     </div>\n//   )\n// };\nvar App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){_classCallCheck(this,App);return _super.apply(this,arguments);}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var setCurrentUser=this.props.setCurrentUser;this.unsubscribeFromAuth=auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userAuth){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!userAuth){_context.next=7;break;}_context.next=3;return createUserProfileDocument(userAuth);case 3:userRef=_context.sent;userRef.onSnapshot(function(snapShot){setCurrentUser(_objectSpread({id:snapShot.id},snapShot.data()));});_context.next=8;break;case 7:setCurrentUser(userAuth);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unsubscribeFromAuth();}},{key:\"render\",value:function render(){var _this=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),\",\",/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:HomePage}),/*#__PURE__*/React.createElement(Route,{path:\"/shop/\",component:ShopPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/checkout/\",component:CheckoutPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/signin/\",render:function render(){return _this.props.currentUser?/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}):/*#__PURE__*/React.createElement(SignInAndSignUp,null);}})));}}]);return App;}(React.Component);var mapStateToProps=createStructuredSelector({currentUser:selectCurrentUser});var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setCurrentUser:function setCurrentUser(user){return dispatch(_setCurrentUser(user));}};};export default connect(mapStateToProps,mapDispatchToProps)(App);","map":{"version":3,"sources":["C:/Users/Preetham/Desktop/REACT/alpha-clothing/src/App.js"],"names":["React","Switch","Route","Redirect","connect","createStructuredSelector","HomePage","ShopPage","CheckoutPage","SignInAndSignUp","Header","auth","createUserProfileDocument","setCurrentUser","selectCurrentUser","App","props","unsubscribeFromAuth","onAuthStateChanged","userAuth","userRef","onSnapshot","snapShot","id","data","currentUser","Component","mapStateToProps","mapDispatchToProps","dispatch","user"],"mappings":"26BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,QAAxB,KAAwC,kBAAxC,CAEA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAAQC,wBAAR,KAAuC,UAAvC,CAEA,MAAO,WAAP,CACA,MAAOC,CAAAA,QAAP,KAAqB,yCAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,kCAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,qCAAzB,CACA,MAAOC,CAAAA,eAAP,KAA4B,+DAA5B,CAEA,MAAOC,CAAAA,MAAP,KAAmB,0CAAnB,CAEA,OAASC,IAAT,CAAeC,yBAAf,KAAgD,2BAAhD,CACA,OAASC,cAAc,GAAdA,CAAAA,eAAT,KAA+B,2BAA/B,CACA,OAAQC,iBAAR,KAAgC,4BAAhC,CAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;GAEMC,CAAAA,G,iQAGgB,IACVF,CAAAA,cADU,CACS,KAAKG,KADd,CACVH,cADU,CAGlB,KAAKI,mBAAL,CAA2BN,IAAI,CAACO,kBAAL,0FAAwB,iBAAOC,QAAP,kIAC7CA,QAD6C,+CAEzBP,CAAAA,yBAAyB,CAACO,QAAD,CAFA,QAEzCC,OAFyC,eAI/CA,OAAO,CAACC,UAAR,CAAmB,SAACC,QAAD,CAAc,CAC/BT,cAAc,gBACZU,EAAE,CAAED,QAAQ,CAACC,EADD,EAETD,QAAQ,CAACE,IAAT,EAFS,EAAd,CAID,CALD,EAJ+C,6BAW/CX,cAAc,CAACM,QAAD,CAAd,CAX+C,sDAAxB,+DAA3B,CAcD,C,mEAEsB,CACrB,KAAKF,mBAAL,GACD,C,uCAEQ,gBACP,mBACE,4CACE,oBAAC,MAAD,MADF,kBAEE,oBAAC,MAAD,mBACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAEX,QAAjC,EADF,cAEE,oBAAC,KAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAEC,QAAjC,EAFF,cAGE,oBAAC,KAAD,EAAQ,KAAK,KAAb,CAAc,IAAI,CAAC,YAAnB,CAAgC,SAAS,CAAEC,YAA3C,EAHF,cAIE,oBAAC,KAAD,EACE,KAAK,KADP,CAEE,IAAI,CAAC,UAFP,CAGE,MAAM,CAAE,wBACN,CAAA,KAAI,CAACQ,KAAL,CAAWS,WAAX,cAAyB,oBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAzB,cAA+C,oBAAC,eAAD,MADzC,EAHV,EAJF,CAFF,CADF,CAiBD,C,iBA5CezB,KAAK,CAAC0B,S,EA+CxB,GAAMC,CAAAA,eAAe,CAAGtB,wBAAwB,CAAE,CAChDoB,WAAW,CAAEX,iBADmC,CAAF,CAAhD,CAIA,GAAMc,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,QAAe,CACxChB,cAAc,CAAE,wBAACiB,IAAD,QAAUD,CAAAA,QAAQ,CAAChB,eAAc,CAACiB,IAAD,CAAf,CAAlB,EADwB,CAAf,EAA3B,CAIA,cAAe1B,CAAAA,OAAO,CAACuB,eAAD,CAAkBC,kBAAlB,CAAP,CAA6Cb,GAA7C,CAAf","sourcesContent":["import React from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\n\nimport { connect } from \"react-redux\";\nimport {createStructuredSelector} from 'reselect';\n\nimport \"./App.css\";\nimport HomePage from \"./pages/homepage/homepage.component.jsx\";\nimport ShopPage from \"./pages/shop/shop.components.jsx\";\nimport CheckoutPage from './pages/checkout/checkout.component';\nimport SignInAndSignUp from \"./pages/sign-in-and-sign-up/sign-in-and-sign-up.component.jsx\";\n\nimport Header from \"./components/header/header.component.jsx\";\n \nimport { auth, createUserProfileDocument } from \"./firebase/firebase.utils\";\nimport { setCurrentUser } from \"./redux/user/user.actions\";\nimport {selectCurrentUser} from './redux/user/user.selector';\n\n// const HatsPage = () => (\n//   <div>\n//     <h1>Hats Page</h1>\n//   </div>\n// )\n\n// const HatsPage = (props) => {\n//   console.log(props);\n//   return (\n//     <div>\n//       <h1>Hats Page</h1>\n//     </div>\n//   )\n// };\n\nclass App extends React.Component {\n  unsubscribeFromAuth: null;\n\n  componentDidMount() {\n    const { setCurrentUser } = this.props;\n\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async (userAuth) => {\n      if (userAuth) {\n        const userRef = await createUserProfileDocument(userAuth);\n\n        userRef.onSnapshot((snapShot) => {\n          setCurrentUser({\n            id: snapShot.id,\n            ...snapShot.data(),\n          });\n        });\n      } else {\n        setCurrentUser(userAuth);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return (\n      <div>\n        <Header />,\n        <Switch>\n          <Route exact path=\"/\" component={HomePage} />\n          <Route  path=\"/shop/\" component={ShopPage} />\n          <Route  exact path=\"/checkout/\" component={CheckoutPage} />\n          <Route\n            exact\n            path=\"/signin/\"\n            render={() =>\n              this.props.currentUser ? <Redirect to=\"/\" /> : <SignInAndSignUp />\n            }\n          />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = createStructuredSelector ({\n  currentUser: selectCurrentUser,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  setCurrentUser: (user) => dispatch(setCurrentUser(user)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}